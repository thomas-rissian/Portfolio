---
import about from '/src/content/about/about.md?raw';
import matter from 'gray-matter';

const { data: frontmatter } = matter(about);

// Icônes Tabler SVG (inline, pas besoin d'import JS)
const ICONS = {
  nom: `<svg xmlns="http://www.w3.org/2000/svg" width="1.6em" height="1.6em" viewBox="0 0 24 24" stroke="currentColor" fill="none"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>`,
  prenom: `<svg xmlns="http://www.w3.org/2000/svg" width="1.6em" height="1.6em" viewBox="0 0 24 24" stroke="currentColor" fill="none"><circle cx="12" cy="7" r="4"/><path d="M5.5 21h13a2 2 0 0 0 2-2v-2a7 7 0 0 0-14 0v2a2 2 0 0 0 2 2z"/></svg>`,
  age: `<svg xmlns="http://www.w3.org/2000/svg" width="1.6em" height="1.6em" viewBox="0 0 24 24" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>`,
  pays: `<svg xmlns="http://www.w3.org/2000/svg" width="1.6em" height="1.6em" viewBox="0 0 24 24" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3 0 0 1 0 20"/><path d="M12 2a15.3 15.3 0 0 0 0 20"/></svg>`,
  langues: `<svg xmlns="http://www.w3.org/2000/svg" width="1.6em" height="1.6em" viewBox="0 0 24 24" stroke="currentColor" fill="none"><path d="M4 5h7"/><path d="M9 3v2c0 4.418 2.239 8 5 8"/><path d="M5 19c1.5-2 4.5-2 6 0"/><path d="M15 21v-4a2 2 0 0 1 2-2h2"/><path d="M19 17v4"/><path d="M16 19h6"/></svg>`
};
---
<section class="personal-section" id="infos">
  <h2 class="personal-title">Informations personnelles</h2>
  <div class="personal-content spaced">
    <div class="personal-left">
      <div class="profile-info-table grid-align">
        <div class="profile-row">
          <span class="profile-label" set:html={ICONS.nom}></span>
          <span class="label-text">Nom :</span>
          <span class="profile-value">{frontmatter.nom}</span>
        </div>
        <div class="profile-row">
          <span class="profile-label" set:html={ICONS.prenom}></span>
          <span class="label-text">Prénom :</span>
          <span class="profile-value">{frontmatter.prenom}</span>
        </div>
        <div class="profile-row">
          <span class="profile-label" set:html={ICONS.age}></span>
          <span class="label-text">Âge :</span>
          <span class="profile-value">{frontmatter.age} ans</span>
        </div>
        <div class="profile-row">
          <span class="profile-label" set:html={ICONS.pays}></span>
          <span class="label-text">Pays :</span>
          <span class="profile-value">{frontmatter.pays}</span>
        </div>
        <div class="profile-row">
          <span class="profile-label" set:html={ICONS.langues}></span>
          <span class="label-text">Langues :</span>
          <span class="profile-value">{Array.isArray(frontmatter.langues) ? frontmatter.langues.join(', ') : frontmatter.langues}</span>
        </div>
      </div>
      <a href={frontmatter.cv} class="cv-btn cv-btn-modern2" download rel="noopener">
        <span class="cv-btn-modern2-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v12"/><path d="M18 13l-6 6-6-6"/></svg>
        </span>
        <span class="cv-btn-modern2-label">Télécharger mon CV</span>
      </a>
    </div>
    <div class="personal-right">
      <iframe
        src={frontmatter.cv}
        class="cv-viewer"
        title="CV PDF"
        frameborder="0"
        loading="lazy"
      ></iframe>
    </div>
  </div>
  {/* Placez votre fichier PDF ici : /public/cv.pdf */}
</section>
<style>
/* ...existing code... */
.personal-content.spaced {
  align-items: flex-start;
  display: flex;
  gap: 3.5rem;
}
.personal-left {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  height: 100%;
}
.cv-btn.cv-btn-modern2 {
  display: inline-flex;
  align-items: center;
  gap: 1em;
  background: #22304a;
  color: #e3f2fd;
  border: 2.5px solid #5A82B2;
  border-radius: 0.9em;
  font-weight: 800;
  font-size: 1.13rem;
  letter-spacing: 1.1px;
  box-shadow: 0 2px 16px #22304a33;
  padding: 0.85em 2.2em;
  margin: 2.2rem auto 0 auto;
  min-width: 240px;
  min-height: 58px;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition: 
    background 0.22s, 
    color 0.22s, 
    border 0.22s, 
    box-shadow 0.22s, 
    transform 0.18s;
}
.cv-btn-modern2-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  background: #5A82B2;
  border-radius: 50%;
  width: 2.2em;
  height: 2.2em;
  margin-right: 0.7em;
  box-shadow: 0 2px 12px #5A82B288;
  transition: background 0.18s, box-shadow 0.18s, transform 0.18s;
}
.cv-btn-modern2-icon svg {
  display: block;
  width: 1.2em;
  height: 1.2em;
  stroke: #fff;
  stroke-width: 2.2;
  transition: stroke 0.18s, transform 0.18s;
}
.cv-btn-modern2-label {
  display: block;
  font-size: 1.08em;
  font-weight: 700;
  letter-spacing: 0.04em;
  text-align: center;
  padding: 0.1em 0;
  transition: color 0.18s;
}
.cv-btn.cv-btn-modern2:hover,
.cv-btn.cv-btn-modern2:focus {
  background: #2d4266;
  color: #fff;
  border-color: #fff;
  box-shadow: 0 8px 32px #5A82B2aa;
  transform: scale(1.04) rotate(-1deg);
}
.cv-btn.cv-btn-modern2:hover .cv-btn-modern2-icon,
.cv-btn.cv-btn-modern2:focus .cv-btn-modern2-icon {
  background: #fff;
  box-shadow: 0 4px 16px #5A82B2cc;
  transform: scale(1.09) rotate(-8deg);
}
.cv-btn.cv-btn-modern2:hover .cv-btn-modern2-icon svg,
.cv-btn.cv-btn-modern2:focus .cv-btn-modern2-icon svg {
  stroke: #5A82B2;
  transform: scale(1.13) rotate(8deg);
}
.cv-btn.cv-btn-modern2:active {
  transform: scale(0.98);
}

/* Agrandit le lecteur PDF (plus large) */
.cv-viewer {
  width: 100%;
  min-width: 320px;
  max-width: 1400px;
  height: 900px;
  border-radius: 0;
  border: 2px solid var(--accent);
  background: #101624;
  box-shadow: none;
  margin-bottom: 1.2rem;
  display: block;
}
@media (max-width: 1600px) {
  .cv-viewer {
    max-width: 98vw;
    height: 600px;
    min-width: 0;
  }
}
@media (max-width: 900px) {
  .cv-viewer {
    max-width: 98vw;
    height: 420px;
    min-width: 0;
  }
}
@media (max-width: 600px) {
  .cv-viewer {
    height: 220px;
    min-width: 0;
  }
}
</style>

